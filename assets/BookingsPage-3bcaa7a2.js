import{u as E,j as a,c as w,S as B,a as S,r as O,d as _}from"./index-4c59b009.js";var v="NOT_FOUND";function R(r){var t;return{get:function(n){return t&&r(t.key,n)?t.value:v},put:function(n,i){t={key:n,value:i}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function z(r,t){var e=[];function n(o){var s=e.findIndex(function(p){return t(o,p.key)});if(s>-1){var u=e[s];return s>0&&(e.splice(s,1),e.unshift(u)),u.value}return v}function i(o,s){n(o)===v&&(e.unshift({key:o,value:s}),e.length>r&&e.pop())}function c(){return e}function l(){e=[]}return{get:n,put:i,getEntries:c,clear:l}}var A=function(t,e){return t===e};function F(r){return function(e,n){if(e===null||n===null||e.length!==n.length)return!1;for(var i=e.length,c=0;c<i;c++)if(!r(e[c],n[c]))return!1;return!0}}function $(r,t){var e=typeof t=="object"?t:{equalityCheck:t},n=e.equalityCheck,i=n===void 0?A:n,c=e.maxSize,l=c===void 0?1:c,o=e.resultEqualityCheck,s=F(i),u=l===1?R(s):z(l,s);function p(){var d=u.get(arguments);if(d===v){if(d=r.apply(null,arguments),o){var g=u.getEntries(),f=g.find(function(m){return o(m.value,d)});f&&(d=f.value)}u.put(arguments,d)}return d}return p.clearCache=function(){return u.clear()},p}function q(r){var t=Array.isArray(r[0])?r[0]:r;if(!t.every(function(n){return typeof n=="function"})){var e=t.map(function(n){return typeof n=="function"?"function "+(n.name||"unnamed")+"()":typeof n}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+e+"]")}return t}function P(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var i=function(){for(var l=arguments.length,o=new Array(l),s=0;s<l;s++)o[s]=arguments[s];var u=0,p,d={memoizeOptions:void 0},g=o.pop();if(typeof g=="object"&&(d=g,g=o.pop()),typeof g!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof g+"]");var f=d,m=f.memoizeOptions,k=m===void 0?e:m,N=Array.isArray(k)?k:[k],y=q(o),x=r.apply(void 0,[function(){return u++,g.apply(null,arguments)}].concat(N)),j=r(function(){for(var C=[],D=y.length,b=0;b<D;b++)C.push(y[b].apply(null,arguments));return p=x.apply(null,C),p});return Object.assign(j,{resultFunc:g,memoizedResultFunc:x,dependencies:y,lastResult:function(){return p},recomputations:function(){return u},resetRecomputations:function(){return u=0}}),j};return i}var L=P($);function T(r){const t=new Date(r),e=t.getDate(),n=t.getMonth()+1,i=t.getFullYear();return`${e<10?"0":""}${e}.${n<10?"0":""}${n}.${i}`}const I=({id:r,totalPrice:t,guests:e,title:n,date:i})=>{const c=E(),l=o=>{c(w(o))};return a.jsxs("li",{"data-test-id":"booking",className:"booking",children:[a.jsx("h3",{"data-test-id":"booking-title",className:"booking__title",children:n}),a.jsxs("span",{"data-test-id":"booking-guests",className:"booking__guests",children:[e," guests"]}),a.jsx("span",{"data-test-id":"booking-date",className:"booking__date",children:T(i)}),a.jsxs("span",{"data-test-id":"booking-total",className:"booking__total",children:[t," $"]}),a.jsxs("button",{"data-test-id":"booking-cancel",className:"booking__cancel",title:"Cancel booking",onClick:()=>l(r),children:[a.jsx("span",{className:"visually-hidden",children:"Cancel booking"}),"Ã—"]})]})};const M=({bookings:r,loading:t})=>a.jsx(a.Fragment,{children:t?a.jsx(B,{}):a.jsx("ul",{className:"bookings__list",children:r.map(e=>a.jsx(I,{id:e.id,totalPrice:e.totalPrice,guests:e.guests,title:e.trip.title,date:e.date},e.id))})}),U=r=>r.bookingReducer.loading,Y=r=>r.bookingReducer.bookings,K=L(Y,r=>[...r].sort((e,n)=>new Date(e.date).getTime()-new Date(n.date).getTime())),G=()=>{const r=E(),t=S(K),e=S(U);return O.useEffect(()=>{r(_())},[r]),a.jsxs("main",{className:"bookings-page",children:[a.jsx("h1",{className:"visually-hidden",children:"Travel App"}),t.length>0?a.jsx(M,{bookings:t,loading:e}):a.jsx("p",{children:"You have no bookings yet"})]})};export{G as default};
